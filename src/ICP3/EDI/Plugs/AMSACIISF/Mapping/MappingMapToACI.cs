////////////////////////////////////////////////////////////////////////
//
// MappingMapToCCF_Target.cs
//
// This file was generated by MapForce 2010.
//
// YOU SHOULD NOT MODIFY THIS FILE, BECAUSE IT WILL BE
// OVERWRITTEN WHEN YOU RE-RUN CODE GENERATION.
//
// Refer to the MapForce Documentation for further details.
// http://www.altova.com/mapforce
//
////////////////////////////////////////////////////////////////////////

using System;
using System.Collections;
using System.Xml;
using Altova.Xml;
using ICP.EDI.ServiceInterface;

namespace AMSACIISF
{

    public class MappingMapToACI : Altova.TraceProvider, IMapping
    {
        private bool runDoesCloseAll = true;
        public bool CloseObjectsAfterRun { get { return runDoesCloseAll; } set { runDoesCloseAll = value; } }




        #region Members
        // instances
        protected XmlNode m_AMSDataSource2Instance;
        // members
        #endregion //Members


        public void Run(String AMSDataSource2SourceFilename, string AMSACIISF2TargetFilename)
        {
            // open source streams
            WriteTrace("Loading " + AMSDataSource2SourceFilename + "...\n");
            Altova.IO.Input AMSDataSource2Source = new Altova.IO.FileInput(AMSDataSource2SourceFilename);
            // open target stream
            Altova.IO.Output AMSACIISF2Target = new Altova.IO.FileOutput(AMSACIISF2TargetFilename);

            // run
            Run(AMSDataSource2Source, AMSACIISF2Target);

            // close source streams
            AMSDataSource2Source.Stream.Close();
            // close target stream
            WriteTrace("Saving " + AMSACIISF2TargetFilename + "...\n");
            AMSACIISF2Target.Stream.Close();
        }

        public void Run(Altova.IO.Input AMSDataSource2Source, Altova.IO.Output AMSACIISF2Target)
        {
            // Open the source(s)
            XmlDocument AMSDataSource2DocSourceObject = XmlTreeOperations.LoadDocument(AMSDataSource2Source);


            m_AMSDataSource2Instance = AMSDataSource2DocSourceObject;
            AMSDataSource2Source.Close();
            // Create the target
            XmlDocument AMSACIISF2Doc = (AMSACIISF2Target.Type == Altova.IO.Output.OutputType.XmlDocument) ? AMSACIISF2Target.Document : new XmlDocument();
            // create processing instruction etc...

            // Execute mapping

            seq1_Main mapping = new seq1_Main(
new Altova.Mapforce.DOMDocumentNodeAsMFNodeAdapter(m_AMSDataSource2Instance, AMSDataSource2Source.Filename));

            Altova.Mapforce.MFDomWriter.Write(mapping, AMSACIISF2Doc);

            // Close the target
            XmlTreeOperations.SaveDocument(
                AMSACIISF2Doc,
                AMSACIISF2Target,
                "UTF-8",
                false,
                false,
                true
            );

            // Close the Source Library

            if (runDoesCloseAll)
            {
                AMSDataSource2Source.Close();
                AMSACIISF2Target.Close();
            }
        }
        class seq1_Main : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_instance_AMSDataSource;

            public seq1_Main(
                Altova.Mapforce.IMFNode var1_instance_AMSDataSource
                )
            {
                this.var1_instance_AMSDataSource = var1_instance_AMSDataSource;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq1_Main closure;
                string var2_const_;
                public Enumerator(seq1_Main closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 0;
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Manifest", var2_const_), var2_const_, (new seq2_create_element_with_prefix(closure.var1_instance_AMSDataSource)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq2_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_AMSDataSource;

            public seq2_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_AMSDataSource
                )
            {
                this.var1_AMSDataSource = var1_AMSDataSource;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq2_create_element_with_prefix closure;
                string var3_const_http___tempuri_org_A;
                System.Collections.IEnumerable var4_filter_elements;
                IEnumerator var2_map_filter_elements;
                string var5_const_;
                public Enumerator(seq2_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 5;
                                var3_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var4_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("AMSDataSource", var3_const_http___tempuri_org_A), closure.var1_AMSDataSource));
                                current = Altova.Functions.Core.CreateAttributeWithPrefix(Altova.Functions.Core.CreateQName("noNamespaceSchemaLocation", "http://www.w3.org/2001/XMLSchema-instance"), "xsi", Altova.Functions.Core.Box("D:/Projects/ICP3.EDI/ICP.EDI/ICP.EDI.FileManager/AMS/AMSACIISF.xsd"));
                                pos++;
                                return true;
                            case 5:
                                state = 10;
                                if (!(Altova.Functions.Core.Exists(var4_filter_elements))) { state = 0; return false; }
                                var2_map_filter_elements = (Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("HBL", var3_const_http___tempuri_org_A), (Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var4_filter_elements))).GetEnumerator();
                                goto case 10;
                            case 10:
                                state = 10;
                                if (!var2_map_filter_elements.MoveNext()) { state = 11; goto case 11; }
                                var5_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("BillOfLading", var5_const_), var5_const_, (new seq3_create_element_with_prefix((Altova.Mapforce.IMFNode)(var2_map_filter_elements.Current))));
                                pos++;
                                return true;
                            case 11:
                                state = 0;
                                Altova.Mapforce.MFEnumerator.Dispose(var2_map_filter_elements); var2_map_filter_elements = null;
                                return false;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                    Altova.Mapforce.MFEnumerator.Dispose(var2_map_filter_elements); var2_map_filter_elements = null;
                }
            }

        }
        class seq3_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq3_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq3_create_element_with_prefix closure;
                string var29_const_Container;
                string var26_const_ACIEntryType;
                string var24_const_CarrierCode;
                string var22_const_VoyageNumber;
                string var20_const_VesselFlag;
                string var18_const_VesselName;
                string var16_const_IMO;
                string var15_const_;
                string var10_const_AmendmentFlag;
                string var6_const_HouseBillNumber;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var27_filter_elements;
                System.Collections.IEnumerable var25_filter_elements;
                System.Collections.IEnumerable var23_filter_elements;
                System.Collections.IEnumerable var21_filter_elements;
                System.Collections.IEnumerable var19_filter_elements;
                System.Collections.IEnumerable var17_filter_elements;
                System.Collections.IEnumerable var14_filter_elements;
                System.Collections.IEnumerable var12_filter_elements;
                System.Collections.IEnumerable var8_filter_elements;
                string var2_const_BookingDate;
                System.Collections.IEnumerable var4_filter_elements;
                string var3_const_;
                System.Collections.IEnumerable var9_filter_elements;
                string var7_const_;
                string var11_const_;
                string var13_const_;
                IEnumerator var28_map_filter_elements;
                public Enumerator(seq3_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var29_const_Container = ("Container");
                                var26_const_ACIEntryType = ("ACIEntryType");
                                var24_const_CarrierCode = ("CarrierCode");
                                var22_const_VoyageNumber = ("VoyageNumber");
                                var20_const_VesselFlag = ("VesselFlag");
                                var18_const_VesselName = ("VesselName");
                                var16_const_IMO = ("IMO");
                                var15_const_ = ("");
                                var10_const_AmendmentFlag = ("AmendmentFlag");
                                var6_const_HouseBillNumber = ("HouseBillNumber");
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var27_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var26_const_ACIEntryType, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var25_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var24_const_CarrierCode, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var23_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var22_const_VoyageNumber, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var21_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var20_const_VesselFlag, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var19_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var18_const_VesselName, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var17_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var16_const_IMO, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var14_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("MasterBillNumber", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var12_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var10_const_AmendmentFlag, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var8_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var6_const_HouseBillNumber, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var2_const_BookingDate = ("BookingDate");
                                var4_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var2_const_BookingDate, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var4_filter_elements))) { state = 6; goto case 6; }
                                var3_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var2_const_BookingDate, var3_const_), var3_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var4_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 14;
                                if (!(Altova.Functions.Core.Exists(var8_filter_elements))) { state = 13; goto case 13; }
                                goto case 14;
                            case 13:
                                state = 27;
                                if (!(Altova.Functions.Core.Exists(var12_filter_elements))) { state = 26; goto case 26; }
                                goto case 27;
                            case 14:
                                state = 13;
                                var9_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("Mark", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var9_filter_elements))) { state = 13; goto case 13; }
                                var7_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var6_const_HouseBillNumber, var7_const_), var7_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var8_filter_elements)), Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var9_filter_elements)))));
                                pos++;
                                return true;
                            case 26:
                                state = 34;
                                if (!(Altova.Functions.Core.Exists(var14_filter_elements))) { state = 33; goto case 33; }
                                goto case 34;
                            case 27:
                                state = 26;
                                var11_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var10_const_AmendmentFlag, var11_const_), var11_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var12_filter_elements))));
                                pos++;
                                return true;
                            case 33:
                                state = 39;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("ShipperPartyInfo", var15_const_), var15_const_, (new seq4_cond_seq_(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 34:
                                state = 33;
                                var13_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("OceanBillNumber", var13_const_), var13_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var14_filter_elements))));
                                pos++;
                                return true;
                            case 39:
                                state = 40;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("ConsigneePartyInfo", var15_const_), var15_const_, (new seq5_cond_seq_(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 40:
                                state = 42;
                                if (!(Altova.Functions.Core.Exists(var17_filter_elements))) { state = 42; goto case 42; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var16_const_IMO, var15_const_), var15_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var17_filter_elements))));
                                pos++;
                                return true;
                            case 42:
                                state = 51;
                                if (!(Altova.Functions.Core.Exists(var19_filter_elements))) { state = 49; goto case 49; }
                                goto case 51;
                            case 49:
                                state = 58;
                                if (!(Altova.Functions.Core.Exists(var21_filter_elements))) { state = 56; goto case 56; }
                                goto case 58;
                            case 51:
                                state = 49;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var18_const_VesselName, var15_const_), var15_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var19_filter_elements))));
                                pos++;
                                return true;
                            case 56:
                                state = 65;
                                if (!(Altova.Functions.Core.Exists(var23_filter_elements))) { state = 63; goto case 63; }
                                goto case 65;
                            case 58:
                                state = 56;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var20_const_VesselFlag, var15_const_), var15_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var21_filter_elements))));
                                pos++;
                                return true;
                            case 63:
                                state = 72;
                                if (!(Altova.Functions.Core.Exists(var25_filter_elements))) { state = 70; goto case 70; }
                                goto case 72;
                            case 65:
                                state = 63;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var22_const_VoyageNumber, var15_const_), var15_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var23_filter_elements))));
                                pos++;
                                return true;
                            case 70:
                                state = 79;
                                if (!(Altova.Functions.Core.Exists(var27_filter_elements))) { state = 77; goto case 77; }
                                goto case 79;
                            case 72:
                                state = 70;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var24_const_CarrierCode, var15_const_), var15_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var25_filter_elements))));
                                pos++;
                                return true;
                            case 77:
                                state = 83;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PlaceOfReceipt", var15_const_), var15_const_, (new seq6_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 79:
                                state = 77;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var26_const_ACIEntryType, var15_const_), var15_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var27_filter_elements))));
                                pos++;
                                return true;
                            case 83:
                                state = 84;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortOfLoad", var15_const_), var15_const_, (new seq7_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 84:
                                state = 85;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("LastForeignPort", var15_const_), var15_const_, (new seq8_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 85:
                                state = 86;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("FirstUSAPort", var15_const_), var15_const_, (new seq9_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 86:
                                state = 87;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortOfDischarge", var15_const_), var15_const_, (new seq10_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 87:
                                state = 88;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PlaceOfDelivery", var15_const_), var15_const_, (new seq11_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 88:
                                state = 89;
                                var28_map_filter_elements = (Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var29_const_Container, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements)).GetEnumerator();
                                goto case 89;
                            case 89:
                                state = 89;
                                if (!var28_map_filter_elements.MoveNext()) { state = 90; goto case 90; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var29_const_Container, var15_const_), var15_const_, (new seq12_create_element_with_prefix((Altova.Mapforce.IMFNode)(var28_map_filter_elements.Current))));
                                pos++;
                                return true;
                            case 90:
                                state = 0;
                                Altova.Mapforce.MFEnumerator.Dispose(var28_map_filter_elements); var28_map_filter_elements = null;
                                return false;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                    Altova.Mapforce.MFEnumerator.Dispose(var28_map_filter_elements); var28_map_filter_elements = null;
                }
            }

        }
        class seq4_cond_seq_ : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq4_cond_seq_(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq4_cond_seq_ closure;
                System.Collections.IEnumerable var3_filter_elements;
                decimal var9_const_35;
                string var7_cast;
                System.Collections.IEnumerable var10_vmf1_inputtoresult;
                double var6_;
                double var5_;
                string var4_substring_after;
                string var8_concat;
                string var2_const_;
                public Enumerator(seq4_cond_seq_ closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 9;
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("ShipperPartyInfo", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 0; return false; }
                                var9_const_35 = (35m);
                                var7_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements)));
                                var10_vmf1_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf0_inputtoresult.Create(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Country>"), "<Country>")));
                                var6_ = (Altova.CoreTypes.DecimalToDouble(40m));
                                var5_ = (Altova.CoreTypes.DecimalToDouble(0m));
                                var4_substring_after = (Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Name>"), "<Name>"));
                                var8_concat = (Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(var4_substring_after, Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Address>"), "<Address>")));
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Name", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)));
                                pos++;
                                return true;
                            case 9:
                                state = 10;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress1", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(var8_concat, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(var9_const_35))))));
                                pos++;
                                return true;
                            case 10:
                                state = 11;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress2", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var8_concat, Altova.CoreTypes.DecimalToDouble(36m), Altova.CoreTypes.DecimalToDouble(var9_const_35))));
                                pos++;
                                return true;
                            case 11:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("CityStateZip", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</City>"), "<City>"), " "), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Zip>"), "<Zip>"))));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var10_vmf1_inputtoresult))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Country", var2_const_), var2_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var10_vmf1_inputtoresult)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq5_cond_seq_ : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq5_cond_seq_(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq5_cond_seq_ closure;
                System.Collections.IEnumerable var3_filter_elements;
                decimal var9_const_35;
                string var7_cast;
                System.Collections.IEnumerable var10_vmf1_inputtoresult;
                double var6_;
                double var5_;
                string var4_substring_after;
                string var8_concat;
                string var2_const_;
                public Enumerator(seq5_cond_seq_ closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 9;
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("ConsigneePartyInfo", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 0; return false; }
                                var9_const_35 = (35m);
                                var7_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements)));
                                var10_vmf1_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf0_inputtoresult.Create(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Country>"), "<Country>")));
                                var6_ = (Altova.CoreTypes.DecimalToDouble(40m));
                                var5_ = (Altova.CoreTypes.DecimalToDouble(0m));
                                var4_substring_after = (Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Name>"), "<Name>"));
                                var8_concat = (Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(var4_substring_after, Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Address>"), "<Address>")));
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Name", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)));
                                pos++;
                                return true;
                            case 9:
                                state = 10;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress1", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(var8_concat, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(var9_const_35))))));
                                pos++;
                                return true;
                            case 10:
                                state = 11;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress2", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var8_concat, Altova.CoreTypes.DecimalToDouble(36m), Altova.CoreTypes.DecimalToDouble(var9_const_35))));
                                pos++;
                                return true;
                            case 11:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("CityStateZip", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</City>"), "<City>"), " "), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Zip>"), "<Zip>"))));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var10_vmf1_inputtoresult))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Country", var2_const_), var2_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var10_vmf1_inputtoresult)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq6_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq6_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq6_create_element_with_prefix closure;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq6_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PlaceOfReceiptPortCode", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 0;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq7_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq7_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq7_create_element_with_prefix closure;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var6_filter_elements;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq7_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var6_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PortOfLoadPortDate", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PortOfLoadPortCode", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var6_filter_elements))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Date", var4_const_), var4_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var6_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq8_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq8_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq8_create_element_with_prefix closure;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq8_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("LastForeignPortPortCode", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 0;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq9_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq9_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq9_create_element_with_prefix closure;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq9_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("FirstUSAPortPortCode", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 0;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq10_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq10_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq10_create_element_with_prefix closure;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var6_filter_elements;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq10_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var6_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PortOfDischargeDate", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PortOfDischargePortCode", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var6_filter_elements))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Date", var4_const_), var4_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var6_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq11_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq11_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq11_create_element_with_prefix closure;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq11_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PlaceOfDeliveryPortCode", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 0;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq12_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq12_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq12_create_element_with_prefix closure;
                string var9_const_;
                string var6_const_Seal;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var8_filter_elements;
                string var2_const_ContainerNumber;
                System.Collections.IEnumerable var4_filter_elements;
                string var3_const_;
                string var7_const_;
                public Enumerator(seq12_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var9_const_ = ("");
                                var6_const_Seal = ("Seal");
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var8_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var6_const_Seal, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var2_const_ContainerNumber = ("ContainerNumber");
                                var4_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var2_const_ContainerNumber, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var4_filter_elements))) { state = 6; goto case 6; }
                                var3_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var2_const_ContainerNumber, var3_const_), var3_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var4_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 14;
                                if (!(Altova.Functions.Core.Exists(var8_filter_elements))) { state = 13; goto case 13; }
                                goto case 14;
                            case 13:
                                state = 0;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("ContainerContent", var9_const_), var9_const_, (new seq13_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 14:
                                state = 13;
                                var7_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var6_const_Seal, var7_const_), var7_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var8_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq13_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq13_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq13_create_element_with_prefix closure;
                string var12_const_FreeFormDescription;
                string var9_const_UnitOfMeasure;
                string var6_const_Quantity;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var14_filter_elements;
                System.Collections.IEnumerable var11_filter_elements;
                System.Collections.IEnumerable var8_filter_elements;
                string var2_const_Kilos;
                System.Collections.IEnumerable var4_filter_elements;
                string var3_const_;
                string var7_const_;
                string var10_const_;
                string var13_const_;
                public Enumerator(seq13_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var12_const_FreeFormDescription = ("FreeFormDescription");
                                var9_const_UnitOfMeasure = ("UnitOfMeasure");
                                var6_const_Quantity = ("Quantity");
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var14_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var12_const_FreeFormDescription, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var11_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var9_const_UnitOfMeasure, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var8_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var6_const_Quantity, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var2_const_Kilos = ("Kilos");
                                var4_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var2_const_Kilos, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var4_filter_elements))) { state = 6; goto case 6; }
                                var3_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var2_const_Kilos, var3_const_), var3_const_, Altova.Functions.Core.Box(Altova.CoreTypes.DecimalToString(Altova.Functions.Core.Round(Altova.CoreTypes.ParseDecimal(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var4_filter_elements)))))));
                                pos++;
                                return true;
                            case 6:
                                state = 14;
                                if (!(Altova.Functions.Core.Exists(var8_filter_elements))) { state = 13; goto case 13; }
                                goto case 14;
                            case 13:
                                state = 21;
                                if (!(Altova.Functions.Core.Exists(var11_filter_elements))) { state = 20; goto case 20; }
                                goto case 21;
                            case 14:
                                state = 13;
                                var7_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var6_const_Quantity, var7_const_), var7_const_, Altova.Functions.Core.Box(Altova.CoreTypes.DecimalToString(Altova.CoreTypes.LongToDecimal(Altova.CoreTypes.IntToLong(Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(Altova.CoreTypes.ParseDecimal(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var8_filter_elements)))))))))));
                                pos++;
                                return true;
                            case 20:
                                state = 28;
                                if (!(Altova.Functions.Core.Exists(var14_filter_elements))) { state = 0; return false; }
                                goto case 28;
                            case 21:
                                state = 20;
                                var10_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var9_const_UnitOfMeasure, var10_const_), var10_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var11_filter_elements))));
                                pos++;
                                return true;
                            case 28:
                                state = 0;
                                var13_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var12_const_FreeFormDescription, var13_const_), var13_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var14_filter_elements)), Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(180m))))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
    }
}
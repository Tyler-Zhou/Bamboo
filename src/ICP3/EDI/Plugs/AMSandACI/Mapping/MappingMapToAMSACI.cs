////////////////////////////////////////////////////////////////////////
//
// MappingMapToCCF_Target.cs
//
// This file was generated by MapForce 2010.
//
// YOU SHOULD NOT MODIFY THIS FILE, BECAUSE IT WILL BE
// OVERWRITTEN WHEN YOU RE-RUN CODE GENERATION.
//
// Refer to the MapForce Documentation for further details.
// http://www.altova.com/mapforce
//
////////////////////////////////////////////////////////////////////////

using System;
using System.Collections;
using System.Xml;
using Altova.Xml;
using ICP.EDI.ServiceInterface;

namespace AMSandACI
{

    public class MappingMapToAMSACI : Altova.TraceProvider, IMapping
    {
        private bool runDoesCloseAll = true;
        public bool CloseObjectsAfterRun { get { return runDoesCloseAll; } set { runDoesCloseAll = value; } }




        #region Members
        // instances
        protected XmlNode m_AMSDataSource2Instance;
        // members
        #endregion //Members


        public void Run(String AMSDataSource2SourceFilename, string AMSACIISF2TargetFilename)
        {
            // open source streams
            WriteTrace("Loading " + AMSDataSource2SourceFilename + "...\n");
            Altova.IO.Input AMSDataSource2Source = new Altova.IO.FileInput(AMSDataSource2SourceFilename);
            // open target stream
            Altova.IO.Output AMSACIISF2Target = new Altova.IO.FileOutput(AMSACIISF2TargetFilename);

            // run
            Run(AMSDataSource2Source, AMSACIISF2Target);

            // close source streams
            AMSDataSource2Source.Stream.Close();
            // close target stream
            WriteTrace("Saving " + AMSACIISF2TargetFilename + "...\n");
            AMSACIISF2Target.Stream.Close();
        }

        public void Run(Altova.IO.Input AMSDataSource2Source, Altova.IO.Output AMSACIISF2Target)
        {
            // Open the source(s)
            XmlDocument AMSDataSource2DocSourceObject = XmlTreeOperations.LoadDocument(AMSDataSource2Source);


            m_AMSDataSource2Instance = AMSDataSource2DocSourceObject;
            AMSDataSource2Source.Close();
            // Create the target
            XmlDocument AMSACIISF2Doc = (AMSACIISF2Target.Type == Altova.IO.Output.OutputType.XmlDocument) ? AMSACIISF2Target.Document : new XmlDocument();
            // create processing instruction etc...

            // Execute mapping

            seq1_Main mapping = new seq1_Main(
new Altova.Mapforce.DOMDocumentNodeAsMFNodeAdapter(m_AMSDataSource2Instance, AMSDataSource2Source.Filename));

            Altova.Mapforce.MFDomWriter.Write(mapping, AMSACIISF2Doc);

            // Close the target
            XmlTreeOperations.SaveDocument(
                AMSACIISF2Doc,
                AMSACIISF2Target,
                "UTF-8",
                false,
                false,
                true
            );

            // Close the Source Library

            if (runDoesCloseAll)
            {
                AMSDataSource2Source.Close();
                AMSACIISF2Target.Close();
            }
        }
        class seq1_Main : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_instance_AMSDataSource;

            public seq1_Main(
                Altova.Mapforce.IMFNode var1_instance_AMSDataSource
                )
            {
                this.var1_instance_AMSDataSource = var1_instance_AMSDataSource;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq1_Main closure;
                string var2_const_;
                public Enumerator(seq1_Main closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 0;
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Manifest", var2_const_), var2_const_, (new seq2_create_element_with_prefix(closure.var1_instance_AMSDataSource)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq2_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_AMSDataSource;

            public seq2_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_AMSDataSource
                )
            {
                this.var1_AMSDataSource = var1_AMSDataSource;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq2_create_element_with_prefix closure;
                string var3_const_http___tempuri_org_A;
                System.Collections.IEnumerable var4_filter_elements;
                IEnumerator var2_map_filter_elements;
                string var5_const_;
                public Enumerator(seq2_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 5;
                                var3_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var4_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("AMSDataSource", var3_const_http___tempuri_org_A), closure.var1_AMSDataSource));
                                current = Altova.Functions.Core.CreateAttributeWithPrefix(Altova.Functions.Core.CreateQName("noNamespaceSchemaLocation", "http://www.w3.org/2001/XMLSchema-instance"), "xsi", Altova.Functions.Core.Box("D:/Projects/ICP3.EDI/ICP.EDI/ICP.EDI.FileManager/AMS/AMSACIISF.xsd"));
                                pos++;
                                return true;
                            case 5:
                                state = 10;
                                if (!(Altova.Functions.Core.Exists(var4_filter_elements))) { state = 0; return false; }
                                var2_map_filter_elements = (Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("HBL", var3_const_http___tempuri_org_A), (Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var4_filter_elements))).GetEnumerator();
                                goto case 10;
                            case 10:
                                state = 10;
                                if (!var2_map_filter_elements.MoveNext()) { state = 11; goto case 11; }
                                var5_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("BillOfLading", var5_const_), var5_const_, (new seq3_create_element_with_prefix((Altova.Mapforce.IMFNode)(var2_map_filter_elements.Current))));
                                pos++;
                                return true;
                            case 11:
                                state = 0;
                                Altova.Mapforce.MFEnumerator.Dispose(var2_map_filter_elements); var2_map_filter_elements = null;
                                return false;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                    Altova.Mapforce.MFEnumerator.Dispose(var2_map_filter_elements); var2_map_filter_elements = null;
                }
            }

        }
        class seq3_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq3_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq3_create_element_with_prefix closure;
                string var34_const_Container;
                string var31_const_ACIEntryType;
                string var29_const_CustomsEntryType;
                string var27_const_CarrierCode;
                string var25_const_VoyageNumber;
                string var23_const_VesselFlag;
                string var21_const_SCAC_Carrier;
                string var19_const_VesselName;
                string var17_const_IMO;
                string var16_const_;
                string var13_const_MasterBillNumber;
                string var10_const_AmendmentFlag;
                string var6_const_HouseBillNumber;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var32_filter_elements;
                System.Collections.IEnumerable var30_filter_elements;
                System.Collections.IEnumerable var28_filter_elements;
                System.Collections.IEnumerable var26_filter_elements;
                System.Collections.IEnumerable var24_filter_elements;
                System.Collections.IEnumerable var22_filter_elements;
                System.Collections.IEnumerable var20_filter_elements;
                System.Collections.IEnumerable var18_filter_elements;
                System.Collections.IEnumerable var15_filter_elements;
                System.Collections.IEnumerable var12_filter_elements;
                System.Collections.IEnumerable var8_filter_elements;
                string var2_const_BookingDate;
                System.Collections.IEnumerable var4_filter_elements;
                string var3_const_;
                System.Collections.IEnumerable var9_filter_elements;
                string var7_const_;
                string var11_const_;
                string var14_const_;
                IEnumerator var33_map_filter_elements;
                public Enumerator(seq3_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var34_const_Container = ("Container");
                                var31_const_ACIEntryType = ("ACIEntryType");
                                var29_const_CustomsEntryType = ("CustomsEntryType");
                                var27_const_CarrierCode = ("CarrierCode");
                                var25_const_VoyageNumber = ("VoyageNumber");
                                var23_const_VesselFlag = ("VesselFlag");
                                var21_const_SCAC_Carrier = ("SCAC_Carrier");
                                var19_const_VesselName = ("VesselName");
                                var17_const_IMO = ("IMO");
                                var16_const_ = ("");
                                var13_const_MasterBillNumber = ("MasterBillNumber");
                                var10_const_AmendmentFlag = ("AmendmentFlag");
                                var6_const_HouseBillNumber = ("HouseBillNumber");
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var32_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var31_const_ACIEntryType, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var30_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var29_const_CustomsEntryType, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var28_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var27_const_CarrierCode, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var26_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var25_const_VoyageNumber, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var24_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var23_const_VesselFlag, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var22_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var21_const_SCAC_Carrier, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var20_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var19_const_VesselName, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var18_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var17_const_IMO, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var15_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var13_const_MasterBillNumber, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var12_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var10_const_AmendmentFlag, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var8_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var6_const_HouseBillNumber, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var2_const_BookingDate = ("BookingDate");
                                var4_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var2_const_BookingDate, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var4_filter_elements))) { state = 6; goto case 6; }
                                var3_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var2_const_BookingDate, var3_const_), var3_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var4_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 14;
                                if (!(Altova.Functions.Core.Exists(var8_filter_elements))) { state = 13; goto case 13; }
                                goto case 14;
                            case 13:
                                state = 27;
                                if (!(Altova.Functions.Core.Exists(var12_filter_elements))) { state = 26; goto case 26; }
                                goto case 27;
                            case 14:
                                state = 13;
                                var9_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("Mark", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var9_filter_elements))) { state = 13; goto case 13; }
                                var7_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var6_const_HouseBillNumber, var7_const_), var7_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var8_filter_elements)), Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var9_filter_elements)))));
                                pos++;
                                return true;
                            case 26:
                                state = 34;
                                if (!(Altova.Functions.Core.Exists(var15_filter_elements))) { state = 33; goto case 33; }
                                goto case 34;
                            case 27:
                                state = 26;
                                var11_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var10_const_AmendmentFlag, var11_const_), var11_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var12_filter_elements))));
                                pos++;
                                return true;
                            case 33:
                                state = 40;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("ShipperPartyInfo", var16_const_), var16_const_, (new seq5_cond_seq_(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 34:
                                state = 36;
                                var14_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var13_const_MasterBillNumber, var14_const_), var14_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var15_filter_elements))));
                                pos++;
                                return true;
                            case 36:
                                state = 33;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("OceanBillNumber", var14_const_), var14_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First((new seq4_if_equal(closure.var1_cur_filter_elements)))));
                                pos++;
                                return true;
                            case 40:
                                state = 41;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("ConsigneePartyInfo", var16_const_), var16_const_, (new seq6_cond_seq_(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 41:
                                state = 43;
                                if (!(Altova.Functions.Core.Exists(var18_filter_elements))) { state = 43; goto case 43; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var17_const_IMO, var16_const_), var16_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var18_filter_elements))));
                                pos++;
                                return true;
                            case 43:
                                state = 52;
                                if (!(Altova.Functions.Core.Exists(var20_filter_elements))) { state = 50; goto case 50; }
                                goto case 52;
                            case 50:
                                state = 59;
                                if (!(Altova.Functions.Core.Exists(var22_filter_elements))) { state = 57; goto case 57; }
                                goto case 59;
                            case 52:
                                state = 50;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var19_const_VesselName, var16_const_), var16_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var20_filter_elements))));
                                pos++;
                                return true;
                            case 57:
                                state = 66;
                                if (!(Altova.Functions.Core.Exists(var24_filter_elements))) { state = 64; goto case 64; }
                                goto case 66;
                            case 59:
                                state = 57;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var21_const_SCAC_Carrier, var16_const_), var16_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var22_filter_elements))));
                                pos++;
                                return true;
                            case 64:
                                state = 73;
                                if (!(Altova.Functions.Core.Exists(var26_filter_elements))) { state = 71; goto case 71; }
                                goto case 73;
                            case 66:
                                state = 64;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var23_const_VesselFlag, var16_const_), var16_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var24_filter_elements))));
                                pos++;
                                return true;
                            case 71:
                                state = 80;
                                if (!(Altova.Functions.Core.Exists(var28_filter_elements))) { state = 78; goto case 78; }
                                goto case 80;
                            case 73:
                                state = 71;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var25_const_VoyageNumber, var16_const_), var16_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var26_filter_elements))));
                                pos++;
                                return true;
                            case 78:
                                state = 87;
                                if (!(Altova.Functions.Core.Exists(var30_filter_elements))) { state = 85; goto case 85; }
                                goto case 87;
                            case 80:
                                state = 78;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var27_const_CarrierCode, var16_const_), var16_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var28_filter_elements))));
                                pos++;
                                return true;
                            case 85:
                                state = 94;
                                if (!(Altova.Functions.Core.Exists(var32_filter_elements))) { state = 92; goto case 92; }
                                goto case 94;
                            case 87:
                                state = 85;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var29_const_CustomsEntryType, var16_const_), var16_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var30_filter_elements))));
                                pos++;
                                return true;
                            case 92:
                                state = 98;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PlaceOfReceipt", var16_const_), var16_const_, (new seq7_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 94:
                                state = 92;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var31_const_ACIEntryType, var16_const_), var16_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var32_filter_elements))));
                                pos++;
                                return true;
                            case 98:
                                state = 99;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortOfLoad", var16_const_), var16_const_, (new seq8_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 99:
                                state = 100;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("LastForeignPort", var16_const_), var16_const_, (new seq9_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 100:
                                state = 101;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("FirstUSAPort", var16_const_), var16_const_, (new seq10_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 101:
                                state = 102;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortOfDischarge", var16_const_), var16_const_, (new seq11_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 102:
                                state = 103;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PlaceOfDelivery", var16_const_), var16_const_, (new seq12_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 103:
                                state = 104;
                                var33_map_filter_elements = (Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var34_const_Container, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements)).GetEnumerator();
                                goto case 104;
                            case 104:
                                state = 104;
                                if (!var33_map_filter_elements.MoveNext()) { state = 105; goto case 105; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var34_const_Container, var16_const_), var16_const_, (new seq13_create_element_with_prefix((Altova.Mapforce.IMFNode)(var33_map_filter_elements.Current))));
                                pos++;
                                return true;
                            case 105:
                                state = 0;
                                Altova.Mapforce.MFEnumerator.Dispose(var33_map_filter_elements); var33_map_filter_elements = null;
                                return false;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                    Altova.Mapforce.MFEnumerator.Dispose(var33_map_filter_elements); var33_map_filter_elements = null;
                }
            }

        }
        class seq4_if_equal : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq4_if_equal(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq4_if_equal closure;
                Altova.Types.QName var3_create_qname;
                string var2_cast;
                public Enumerator(seq4_if_equal closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 0;
                                var3_create_qname = (Altova.Functions.Core.CreateQName("MasterBillNumber", "http://tempuri.org/AMSDataSource.xsd"));
                                var2_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(Altova.Functions.Core.FilterElements(var3_create_qname, closure.var1_cur_filter_elements))));
                                if (!((Altova.Functions.Lang.Uppercase(Altova.Functions.Lang.Left(var2_cast, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(4m)))))) == ("CHNJ"))) { state = 11; goto case 11; }
                                current = Altova.Functions.Core.Substring(var2_cast, Altova.CoreTypes.DecimalToDouble(5m));
                                pos++;
                                return true;
                            case 11:
                                state = 0;
                                current = Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(Altova.Functions.Core.FilterElements(var3_create_qname, closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq5_cond_seq_ : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq5_cond_seq_(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq5_cond_seq_ closure;
                System.Collections.IEnumerable var3_filter_elements;
                decimal var9_const_35;
                string var7_cast;
                System.Collections.IEnumerable var10_vmf1_inputtoresult;
                double var6_;
                double var5_;
                string var4_substring_after;
                string var8_concat;
                string var2_const_;
                public Enumerator(seq5_cond_seq_ closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 9;
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("ShipperPartyInfo", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 0; return false; }
                                var9_const_35 = (35m);
                                var7_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements)));
                                var10_vmf1_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf1_inputtoresult.Create(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Country>"), "<Country>")));
                                var6_ = (Altova.CoreTypes.DecimalToDouble(40m));
                                var5_ = (Altova.CoreTypes.DecimalToDouble(0m));
                                var4_substring_after = (Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Name>"), "<Name>"));
                                var8_concat = (Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(var4_substring_after, Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Address>"), "<Address>")));
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Name", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)));
                                pos++;
                                return true;
                            case 9:
                                state = 10;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress1", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(var8_concat, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(var9_const_35))))));
                                pos++;
                                return true;
                            case 10:
                                state = 11;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress2", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var8_concat, Altova.CoreTypes.DecimalToDouble(36m), Altova.CoreTypes.DecimalToDouble(var9_const_35))));
                                pos++;
                                return true;
                            case 11:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("CityStateZip", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</City>"), "<City>"), " "), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Zip>"), "<Zip>"))));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var10_vmf1_inputtoresult))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Country", var2_const_), var2_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var10_vmf1_inputtoresult)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq6_cond_seq_ : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq6_cond_seq_(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq6_cond_seq_ closure;
                System.Collections.IEnumerable var3_filter_elements;
                decimal var9_const_35;
                string var7_cast;
                System.Collections.IEnumerable var10_vmf1_inputtoresult;
                double var6_;
                double var5_;
                string var4_substring_after;
                string var8_concat;
                string var2_const_;
                public Enumerator(seq6_cond_seq_ closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 9;
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("ConsigneePartyInfo", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 0; return false; }
                                var9_const_35 = (35m);
                                var7_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements)));
                                var10_vmf1_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf1_inputtoresult.Create(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Country>"), "<Country>")));
                                var6_ = (Altova.CoreTypes.DecimalToDouble(40m));
                                var5_ = (Altova.CoreTypes.DecimalToDouble(0m));
                                var4_substring_after = (Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Name>"), "<Name>"));
                                var8_concat = (Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(var4_substring_after, Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Address>"), "<Address>")));
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Name", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)));
                                pos++;
                                return true;
                            case 9:
                                state = 10;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress1", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(var8_concat, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(var9_const_35))))));
                                pos++;
                                return true;
                            case 10:
                                state = 11;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress2", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var8_concat, Altova.CoreTypes.DecimalToDouble(36m), Altova.CoreTypes.DecimalToDouble(var9_const_35))));
                                pos++;
                                return true;
                            case 11:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("CityStateZip", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</City>"), "<City>"), " "), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Zip>"), "<Zip>"))));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var10_vmf1_inputtoresult))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Country", var2_const_), var2_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var10_vmf1_inputtoresult)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq7_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq7_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq7_create_element_with_prefix closure;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq7_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PlaceOfReceiptPortCode", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 0;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq8_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq8_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq8_create_element_with_prefix closure;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var6_filter_elements;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq8_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var6_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PortOfLoadPortDate", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PortOfLoadPortCode", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var6_filter_elements))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Date", var4_const_), var4_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var6_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq9_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq9_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq9_create_element_with_prefix closure;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq9_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("LastForeignPortPortCode", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 0;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq10_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq10_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq10_create_element_with_prefix closure;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var6_filter_elements;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq10_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var6_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("FirstUSAPortPortDate", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("FirstUSAPortPortCode", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var6_filter_elements))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Date", var4_const_), var4_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var6_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq11_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq11_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq11_create_element_with_prefix closure;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var6_filter_elements;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq11_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var6_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PortOfDischargeDate", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PortOfDischargePortCode", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var6_filter_elements))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Date", var4_const_), var4_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var6_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq12_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq12_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq12_create_element_with_prefix closure;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq12_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PlaceOfDeliveryPortCode", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 0;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq13_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq13_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq13_create_element_with_prefix closure;
                string var9_const_;
                string var6_const_Seal;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var8_filter_elements;
                string var2_const_ContainerNumber;
                System.Collections.IEnumerable var4_filter_elements;
                string var3_const_;
                string var7_const_;
                public Enumerator(seq13_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var9_const_ = ("");
                                var6_const_Seal = ("Seal");
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var8_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var6_const_Seal, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var2_const_ContainerNumber = ("ContainerNumber");
                                var4_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var2_const_ContainerNumber, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var4_filter_elements))) { state = 6; goto case 6; }
                                var3_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var2_const_ContainerNumber, var3_const_), var3_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var4_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 14;
                                if (!(Altova.Functions.Core.Exists(var8_filter_elements))) { state = 13; goto case 13; }
                                goto case 14;
                            case 13:
                                state = 0;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("ContainerContent", var9_const_), var9_const_, (new seq14_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 14:
                                state = 13;
                                var7_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var6_const_Seal, var7_const_), var7_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var8_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq14_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq14_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq14_create_element_with_prefix closure;
                string var12_const_FreeFormDescription;
                string var9_const_UnitOfMeasure;
                string var6_const_Quantity;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var14_filter_elements;
                System.Collections.IEnumerable var11_filter_elements;
                System.Collections.IEnumerable var8_filter_elements;
                string var2_const_Kilos;
                System.Collections.IEnumerable var4_filter_elements;
                string var3_const_;
                string var7_const_;
                string var10_const_;
                string var13_const_;
                public Enumerator(seq14_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var12_const_FreeFormDescription = ("FreeFormDescription");
                                var9_const_UnitOfMeasure = ("UnitOfMeasure");
                                var6_const_Quantity = ("Quantity");
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var14_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var12_const_FreeFormDescription, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var11_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var9_const_UnitOfMeasure, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var8_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var6_const_Quantity, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var2_const_Kilos = ("Kilos");
                                var4_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var2_const_Kilos, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var4_filter_elements))) { state = 6; goto case 6; }
                                var3_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var2_const_Kilos, var3_const_), var3_const_, Altova.Functions.Core.Box(Altova.CoreTypes.DecimalToString(Altova.Functions.Core.Round(Altova.CoreTypes.ParseDecimal(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var4_filter_elements)))))));
                                pos++;
                                return true;
                            case 6:
                                state = 14;
                                if (!(Altova.Functions.Core.Exists(var8_filter_elements))) { state = 13; goto case 13; }
                                goto case 14;
                            case 13:
                                state = 21;
                                if (!(Altova.Functions.Core.Exists(var11_filter_elements))) { state = 20; goto case 20; }
                                goto case 21;
                            case 14:
                                state = 13;
                                var7_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var6_const_Quantity, var7_const_), var7_const_, Altova.Functions.Core.Box(Altova.CoreTypes.DecimalToString(Altova.CoreTypes.LongToDecimal(Altova.CoreTypes.IntToLong(Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(Altova.CoreTypes.ParseDecimal(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var8_filter_elements)))))))))));
                                pos++;
                                return true;
                            case 20:
                                state = 28;
                                if (!(Altova.Functions.Core.Exists(var14_filter_elements))) { state = 0; return false; }
                                goto case 28;
                            case 21:
                                state = 20;
                                var10_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var9_const_UnitOfMeasure, var10_const_), var10_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var11_filter_elements))));
                                pos++;
                                return true;
                            case 28:
                                state = 0;
                                var13_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var12_const_FreeFormDescription, var13_const_), var13_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var14_filter_elements)), Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(180m))))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
    }
}

////////////////////////////////////////////////////////////////////////
//
// MappingMapToCCF_Target.cs
//
// This file was generated by MapForce 2010.
//
// YOU SHOULD NOT MODIFY THIS FILE, BECAUSE IT WILL BE
// OVERWRITTEN WHEN YOU RE-RUN CODE GENERATION.
//
// Refer to the MapForce Documentation for further details.
// http://www.altova.com/mapforce
//
////////////////////////////////////////////////////////////////////////

using System;
using System.Collections;
using System.Xml;
using Altova.Xml;
using ICP.EDI.ServiceInterface;

namespace AMSandACIandISF
{

    public class MappingMapToAMSACIISF : Altova.TraceProvider, IMapping
    {
        private bool runDoesCloseAll = true;
        public bool CloseObjectsAfterRun { get { return runDoesCloseAll; } set { runDoesCloseAll = value; } }




        #region Members
        // instances
        protected XmlNode m_AMSDataSource2Instance;
        // members
        #endregion //Members


        public void Run(String AMSDataSource2SourceFilename, string AMSACIISF2TargetFilename)
        {
            // open source streams
            WriteTrace("Loading " + AMSDataSource2SourceFilename + "...\n");
            Altova.IO.Input AMSDataSource2Source = new Altova.IO.FileInput(AMSDataSource2SourceFilename);
            // open target stream
            Altova.IO.Output AMSACIISF2Target = new Altova.IO.FileOutput(AMSACIISF2TargetFilename);

            // run
            Run(AMSDataSource2Source, AMSACIISF2Target);

            // close source streams
            AMSDataSource2Source.Stream.Close();
            // close target stream
            WriteTrace("Saving " + AMSACIISF2TargetFilename + "...\n");
            AMSACIISF2Target.Stream.Close();
        }

        public void Run(Altova.IO.Input AMSDataSource2Source, Altova.IO.Output AMSACIISF2Target)
        {
            // Open the source(s)
            XmlDocument AMSDataSource2DocSourceObject = XmlTreeOperations.LoadDocument(AMSDataSource2Source);


            m_AMSDataSource2Instance = AMSDataSource2DocSourceObject;
            AMSDataSource2Source.Close();
            // Create the target
            XmlDocument AMSACIISF2Doc = (AMSACIISF2Target.Type == Altova.IO.Output.OutputType.XmlDocument) ? AMSACIISF2Target.Document : new XmlDocument();
            // create processing instruction etc...

            // Execute mapping

            seq1_Main mapping = new seq1_Main(
new Altova.Mapforce.DOMDocumentNodeAsMFNodeAdapter(m_AMSDataSource2Instance, AMSDataSource2Source.Filename));

            Altova.Mapforce.MFDomWriter.Write(mapping, AMSACIISF2Doc);

            // Close the target
            XmlTreeOperations.SaveDocument(
                AMSACIISF2Doc,
                AMSACIISF2Target,
                "UTF-8",
                false,
                false,
                true
            );

            // Close the Source Library

            if (runDoesCloseAll)
            {
                AMSDataSource2Source.Close();
                AMSACIISF2Target.Close();
            }
        }
        class seq1_Main : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_instance_AMSDataSource;

            public seq1_Main(
                Altova.Mapforce.IMFNode var1_instance_AMSDataSource
                )
            {
                this.var1_instance_AMSDataSource = var1_instance_AMSDataSource;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq1_Main closure;
                string var2_const_;
                public Enumerator(seq1_Main closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 0;
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Manifest", var2_const_), var2_const_, (new seq2_create_element_with_prefix(closure.var1_instance_AMSDataSource)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq2_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_AMSDataSource;

            public seq2_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_AMSDataSource
                )
            {
                this.var1_AMSDataSource = var1_AMSDataSource;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq2_create_element_with_prefix closure;
                string var3_const_http___tempuri_org_A;
                System.Collections.IEnumerable var4_filter_elements;
                IEnumerator var2_map_filter_elements;
                string var5_const_;
                public Enumerator(seq2_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 5;
                                var3_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var4_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("AMSDataSource", var3_const_http___tempuri_org_A), closure.var1_AMSDataSource));
                                current = Altova.Functions.Core.CreateAttributeWithPrefix(Altova.Functions.Core.CreateQName("noNamespaceSchemaLocation", "http://www.w3.org/2001/XMLSchema-instance"), "xsi", Altova.Functions.Core.Box("D:/Projects/ICP3.EDI/ICP.EDI/ICP.EDI.FileManager/AMS/AMSACIISF.xsd"));
                                pos++;
                                return true;
                            case 5:
                                state = 10;
                                if (!(Altova.Functions.Core.Exists(var4_filter_elements))) { state = 0; return false; }
                                var2_map_filter_elements = (Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("HBL", var3_const_http___tempuri_org_A), (Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var4_filter_elements))).GetEnumerator();
                                goto case 10;
                            case 10:
                                state = 10;
                                if (!var2_map_filter_elements.MoveNext()) { state = 11; goto case 11; }
                                var5_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("BillOfLading", var5_const_), var5_const_, (new seq3_create_element_with_prefix((Altova.Mapforce.IMFNode)(var2_map_filter_elements.Current))));
                                pos++;
                                return true;
                            case 11:
                                state = 0;
                                Altova.Mapforce.MFEnumerator.Dispose(var2_map_filter_elements); var2_map_filter_elements = null;
                                return false;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                    Altova.Mapforce.MFEnumerator.Dispose(var2_map_filter_elements); var2_map_filter_elements = null;
                }
            }

        }
        class seq3_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq3_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq3_create_element_with_prefix closure;
                string var60_const_Container;
                string var57_const_ACIEntryType;
                string var56_const_CustomsEntryType;
                string var53_const_ISFImporterLastName;
                string var51_const_ISFImporterFirstName;
                string var49_const_ISFImporterCountryOf;
                string var47_const_ISFImporterDOB;
                string var45_const_ISFImporterID;
                string var43_const_ISFImporterIDType;
                string var40_const_BondReferenceType;
                string var37_const_BondReferenceNumber;
                string var35_const_BondActivityCode;
                string var32_const_CargoType;
                string var28_const_CarrierCode;
                string var26_const_VoyageNumber;
                string var24_const_VesselFlag;
                string var22_const_SCAC_Carrier;
                string var20_const_VesselName;
                string var18_const_IMO;
                string var17_const_;
                string var13_const_MasterBillNumber;
                string var10_const_AmendmentFlag;
                string var6_const_HouseBillNumber;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var58_filter_elements;
                System.Collections.IEnumerable var54_filter_elements;
                System.Collections.IEnumerable var52_filter_elements;
                System.Collections.IEnumerable var50_filter_elements;
                System.Collections.IEnumerable var48_filter_elements;
                System.Collections.IEnumerable var46_filter_elements;
                System.Collections.IEnumerable var42_filter_elements;
                System.Collections.IEnumerable var39_filter_elements;
                System.Collections.IEnumerable var38_filter_elements;
                System.Collections.IEnumerable var34_filter_elements;
                System.Collections.IEnumerable var31_filter_elements;
                System.Collections.IEnumerable var30_filter_elements;
                bool var55_exists;
                System.Collections.IEnumerable var29_filter_elements;
                System.Collections.IEnumerable var27_filter_elements;
                System.Collections.IEnumerable var25_filter_elements;
                System.Collections.IEnumerable var23_filter_elements;
                System.Collections.IEnumerable var21_filter_elements;
                System.Collections.IEnumerable var19_filter_elements;
                System.Collections.IEnumerable var15_filter_elements;
                System.Collections.IEnumerable var12_filter_elements;
                System.Collections.IEnumerable var8_filter_elements;
                string var2_const_BookingDate;
                System.Collections.IEnumerable var4_filter_elements;
                string var3_const_;
                System.Collections.IEnumerable var9_filter_elements;
                string var7_const_;
                string var11_const_;
                Altova.Mapforce.IMFNode var16_filter_elements;
                string var14_const_;
                System.Collections.IEnumerable var33_vmf4_inputtoresult;
                System.Collections.IEnumerable var36_vmf5_inputtoresult;
                System.Collections.IEnumerable var41_vmf6_inputtoresult;
                System.Collections.IEnumerable var44_vmf7_inputtoresult;
                IEnumerator var59_map_filter_elements;
                public Enumerator(seq3_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var60_const_Container = ("Container");
                                var57_const_ACIEntryType = ("ACIEntryType");
                                var56_const_CustomsEntryType = ("CustomsEntryType");
                                var53_const_ISFImporterLastName = ("ISFImporterLastName");
                                var51_const_ISFImporterFirstName = ("ISFImporterFirstName");
                                var49_const_ISFImporterCountryOf = ("ISFImporterCountryOfIssuance");
                                var47_const_ISFImporterDOB = ("ISFImporterDOB");
                                var45_const_ISFImporterID = ("ISFImporterID");
                                var43_const_ISFImporterIDType = ("ISFImporterIDType");
                                var40_const_BondReferenceType = ("BondReferenceType");
                                var37_const_BondReferenceNumber = ("BondReferenceNumber");
                                var35_const_BondActivityCode = ("BondActivityCode");
                                var32_const_CargoType = ("CargoType");
                                var28_const_CarrierCode = ("CarrierCode");
                                var26_const_VoyageNumber = ("VoyageNumber");
                                var24_const_VesselFlag = ("VesselFlag");
                                var22_const_SCAC_Carrier = ("SCAC_Carrier");
                                var20_const_VesselName = ("VesselName");
                                var18_const_IMO = ("IMO");
                                var17_const_ = ("");
                                var13_const_MasterBillNumber = ("MasterBillNumber");
                                var10_const_AmendmentFlag = ("AmendmentFlag");
                                var6_const_HouseBillNumber = ("HouseBillNumber");
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var58_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var57_const_ACIEntryType, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var54_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var53_const_ISFImporterLastName, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var52_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var51_const_ISFImporterFirstName, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var50_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var49_const_ISFImporterCountryOf, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var48_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var47_const_ISFImporterDOB, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var46_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var45_const_ISFImporterID, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var42_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var43_const_ISFImporterIDType, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var39_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var40_const_BondReferenceType, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var38_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var37_const_BondReferenceNumber, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var34_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var35_const_BondActivityCode, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var31_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var32_const_CargoType, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var30_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var56_const_CustomsEntryType, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var55_exists = (Altova.Functions.Core.Exists(var30_filter_elements));
                                var29_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var28_const_CarrierCode, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var27_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var26_const_VoyageNumber, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var25_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var24_const_VesselFlag, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var23_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var22_const_SCAC_Carrier, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var21_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var20_const_VesselName, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var19_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var18_const_IMO, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var15_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var13_const_MasterBillNumber, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var12_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var10_const_AmendmentFlag, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var8_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var6_const_HouseBillNumber, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var2_const_BookingDate = ("BookingDate");
                                var4_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var2_const_BookingDate, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var4_filter_elements))) { state = 6; goto case 6; }
                                var3_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var2_const_BookingDate, var3_const_), var3_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var4_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 14;
                                if (!(Altova.Functions.Core.Exists(var8_filter_elements))) { state = 13; goto case 13; }
                                goto case 14;
                            case 13:
                                state = 27;
                                if (!(Altova.Functions.Core.Exists(var12_filter_elements))) { state = 26; goto case 26; }
                                goto case 27;
                            case 14:
                                state = 13;
                                var9_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("Mark", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var9_filter_elements))) { state = 13; goto case 13; }
                                var7_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var6_const_HouseBillNumber, var7_const_), var7_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var8_filter_elements)), Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var9_filter_elements)))));
                                pos++;
                                return true;
                            case 26:
                                state = 34;
                                if (!(Altova.Functions.Core.Exists(var15_filter_elements))) { state = 33; goto case 33; }
                                goto case 34;
                            case 27:
                                state = 26;
                                var11_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var10_const_AmendmentFlag, var11_const_), var11_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var12_filter_elements))));
                                pos++;
                                return true;
                            case 33:
                                state = 40;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("ShipperPartyInfo", var17_const_), var17_const_, (new seq4_cond_seq_(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 34:
                                state = 36;
                                var16_filter_elements = ((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var15_filter_elements));
                                var14_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var13_const_MasterBillNumber, var14_const_), var14_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString(var16_filter_elements)));
                                pos++;
                                return true;
                            case 36:
                                state = 33;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("OceanBillNumber", var14_const_), var14_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(Altova.CoreTypes.NodeToString(var16_filter_elements), Altova.CoreTypes.DecimalToDouble(5m))));
                                pos++;
                                return true;
                            case 40:
                                state = 41;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("ConsigneePartyInfo", var17_const_), var17_const_, (new seq5_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 41:
                                state = 42;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("ShipToPartyInfo", var17_const_), var17_const_, (new seq6_cond_seq_(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 42:
                                state = 43;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("BuyerPartyInfo", var17_const_), var17_const_, (new seq7_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 43:
                                state = 44;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("SellerPartyInfo", var17_const_), var17_const_, (new seq8_cond_seq_(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 44:
                                state = 45;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("ManufacturerPartyInfo", var17_const_), var17_const_, (new seq9_cond_seq_(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 45:
                                state = 46;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("ConsolidatorPartyInfo", var17_const_), var17_const_, (new seq10_cond_seq_(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 46:
                                state = 47;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("ContainerStuffingLocation", var17_const_), var17_const_, (new seq11_cond_seq_(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 47:
                                state = 48;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("BookingPartyInfo", var17_const_), var17_const_, (new seq12_cond_seq_(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 48:
                                state = 50;
                                if (!(Altova.Functions.Core.Exists(var19_filter_elements))) { state = 50; goto case 50; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var18_const_IMO, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var19_filter_elements))));
                                pos++;
                                return true;
                            case 50:
                                state = 59;
                                if (!(Altova.Functions.Core.Exists(var21_filter_elements))) { state = 57; goto case 57; }
                                goto case 59;
                            case 57:
                                state = 66;
                                if (!(Altova.Functions.Core.Exists(var23_filter_elements))) { state = 64; goto case 64; }
                                goto case 66;
                            case 59:
                                state = 57;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var20_const_VesselName, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var21_filter_elements))));
                                pos++;
                                return true;
                            case 64:
                                state = 73;
                                if (!(Altova.Functions.Core.Exists(var25_filter_elements))) { state = 71; goto case 71; }
                                goto case 73;
                            case 66:
                                state = 64;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var22_const_SCAC_Carrier, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var23_filter_elements))));
                                pos++;
                                return true;
                            case 71:
                                state = 80;
                                if (!(Altova.Functions.Core.Exists(var27_filter_elements))) { state = 78; goto case 78; }
                                goto case 80;
                            case 73:
                                state = 71;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var24_const_VesselFlag, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var25_filter_elements))));
                                pos++;
                                return true;
                            case 78:
                                state = 87;
                                if (!(Altova.Functions.Core.Exists(var29_filter_elements))) { state = 85; goto case 85; }
                                goto case 87;
                            case 80:
                                state = 78;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var26_const_VoyageNumber, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var27_filter_elements))));
                                pos++;
                                return true;
                            case 85:
                                state = 94;
                                if (!(var55_exists)) { state = 92; goto case 92; }
                                goto case 94;
                            case 87:
                                state = 85;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var28_const_CarrierCode, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var29_filter_elements))));
                                pos++;
                                return true;
                            case 92:
                                state = 100;
                                if (!(Altova.Functions.Core.Exists(var31_filter_elements))) { state = 99; goto case 99; }
                                goto case 100;
                            case 94:
                                state = 92;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("TenTwoEntryType", var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var30_filter_elements))));
                                pos++;
                                return true;
                            case 99:
                                state = 113;
                                if (!(Altova.Functions.Core.Exists(var34_filter_elements))) { state = 112; goto case 112; }
                                goto case 113;
                            case 100:
                                state = 99;
                                var33_vmf4_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf4_inputtoresult.Create(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var31_filter_elements))));
                                if (!(Altova.Functions.Core.Exists(var33_vmf4_inputtoresult))) { state = 99; goto case 99; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var32_const_CargoType, var17_const_), var17_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var33_vmf4_inputtoresult)));
                                pos++;
                                return true;
                            case 112:
                                state = 127;
                                if (!(Altova.Functions.Core.Exists(var38_filter_elements))) { state = 125; goto case 125; }
                                goto case 127;
                            case 113:
                                state = 112;
                                var36_vmf5_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf5_inputtoresult.Create(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var34_filter_elements))));
                                if (!(Altova.Functions.Core.Exists(var36_vmf5_inputtoresult))) { state = 112; goto case 112; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var35_const_BondActivityCode, var17_const_), var17_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var36_vmf5_inputtoresult)));
                                pos++;
                                return true;
                            case 125:
                                state = 133;
                                if (!(Altova.Functions.Core.Exists(var39_filter_elements))) { state = 132; goto case 132; }
                                goto case 133;
                            case 127:
                                state = 125;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var37_const_BondReferenceNumber, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var38_filter_elements))));
                                pos++;
                                return true;
                            case 132:
                                state = 146;
                                if (!(Altova.Functions.Core.Exists(var42_filter_elements))) { state = 145; goto case 145; }
                                goto case 146;
                            case 133:
                                state = 132;
                                var41_vmf6_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf6_inputtoresult.Create(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var39_filter_elements))));
                                if (!(Altova.Functions.Core.Exists(var41_vmf6_inputtoresult))) { state = 132; goto case 132; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var40_const_BondReferenceType, var17_const_), var17_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var41_vmf6_inputtoresult)));
                                pos++;
                                return true;
                            case 145:
                                state = 160;
                                if (!(Altova.Functions.Core.Exists(var46_filter_elements))) { state = 158; goto case 158; }
                                goto case 160;
                            case 146:
                                state = 145;
                                var44_vmf7_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf7_inputtoresult.Create(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var42_filter_elements))));
                                if (!(Altova.Functions.Core.Exists(var44_vmf7_inputtoresult))) { state = 145; goto case 145; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var43_const_ISFImporterIDType, var17_const_), var17_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var44_vmf7_inputtoresult)));
                                pos++;
                                return true;
                            case 158:
                                state = 167;
                                if (!(Altova.Functions.Core.Exists(var48_filter_elements))) { state = 165; goto case 165; }
                                goto case 167;
                            case 160:
                                state = 158;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var45_const_ISFImporterID, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var46_filter_elements))));
                                pos++;
                                return true;
                            case 165:
                                state = 174;
                                if (!(Altova.Functions.Core.Exists(var50_filter_elements))) { state = 172; goto case 172; }
                                goto case 174;
                            case 167:
                                state = 165;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var47_const_ISFImporterDOB, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var48_filter_elements))));
                                pos++;
                                return true;
                            case 172:
                                state = 181;
                                if (!(Altova.Functions.Core.Exists(var52_filter_elements))) { state = 179; goto case 179; }
                                goto case 181;
                            case 174:
                                state = 172;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var49_const_ISFImporterCountryOf, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var50_filter_elements))));
                                pos++;
                                return true;
                            case 179:
                                state = 188;
                                if (!(Altova.Functions.Core.Exists(var54_filter_elements))) { state = 186; goto case 186; }
                                goto case 188;
                            case 181:
                                state = 179;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var51_const_ISFImporterFirstName, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var52_filter_elements))));
                                pos++;
                                return true;
                            case 186:
                                state = 195;
                                if (!(var55_exists)) { state = 193; goto case 193; }
                                goto case 195;
                            case 188:
                                state = 186;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var53_const_ISFImporterLastName, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var54_filter_elements))));
                                pos++;
                                return true;
                            case 193:
                                state = 202;
                                if (!(Altova.Functions.Core.Exists(var58_filter_elements))) { state = 200; goto case 200; }
                                goto case 202;
                            case 195:
                                state = 193;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var56_const_CustomsEntryType, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var30_filter_elements))));
                                pos++;
                                return true;
                            case 200:
                                state = 206;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PlaceOfReceipt", var17_const_), var17_const_, (new seq13_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 202:
                                state = 200;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var57_const_ACIEntryType, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var58_filter_elements))));
                                pos++;
                                return true;
                            case 206:
                                state = 207;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortOfLoad", var17_const_), var17_const_, (new seq14_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 207:
                                state = 208;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("LastForeignPort", var17_const_), var17_const_, (new seq15_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 208:
                                state = 209;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("FirstUSAPort", var17_const_), var17_const_, (new seq16_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 209:
                                state = 210;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortOfDischarge", var17_const_), var17_const_, (new seq17_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 210:
                                state = 211;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PlaceOfDelivery", var17_const_), var17_const_, (new seq18_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 211:
                                state = 212;
                                var59_map_filter_elements = (Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var60_const_Container, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements)).GetEnumerator();
                                goto case 212;
                            case 212:
                                state = 212;
                                if (!var59_map_filter_elements.MoveNext()) { state = 213; goto case 213; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var60_const_Container, var17_const_), var17_const_, (new seq19_create_element_with_prefix((Altova.Mapforce.IMFNode)(var59_map_filter_elements.Current))));
                                pos++;
                                return true;
                            case 213:
                                state = 0;
                                Altova.Mapforce.MFEnumerator.Dispose(var59_map_filter_elements); var59_map_filter_elements = null;
                                return false;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                    Altova.Mapforce.MFEnumerator.Dispose(var59_map_filter_elements); var59_map_filter_elements = null;
                }
            }

        }
        class seq4_cond_seq_ : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq4_cond_seq_(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq4_cond_seq_ closure;
                System.Collections.IEnumerable var3_filter_elements;
                decimal var9_const_35;
                string var7_cast;
                System.Collections.IEnumerable var10_vmf1_inputtoresult;
                double var6_;
                double var5_;
                string var4_substring_after;
                string var8_concat;
                string var2_const_;
                public Enumerator(seq4_cond_seq_ closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 9;
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("ShipperPartyInfo", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 0; return false; }
                                var9_const_35 = (35m);
                                var7_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements)));
                                var10_vmf1_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf1_inputtoresult.Create(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Country>"), "<Country>")));
                                var6_ = (Altova.CoreTypes.DecimalToDouble(40m));
                                var5_ = (Altova.CoreTypes.DecimalToDouble(0m));
                                var4_substring_after = (Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Name>"), "<Name>"));
                                var8_concat = (Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(var4_substring_after, Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Address>"), "<Address>")));
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Name", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)));
                                pos++;
                                return true;
                            case 9:
                                state = 10;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress1", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(var8_concat, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(var9_const_35))))));
                                pos++;
                                return true;
                            case 10:
                                state = 11;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress2", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var8_concat, Altova.CoreTypes.DecimalToDouble(36m), Altova.CoreTypes.DecimalToDouble(var9_const_35))));
                                pos++;
                                return true;
                            case 11:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("CityStateZip", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</City>"), "<City>"), " "), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Zip>"), "<Zip>"))));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var10_vmf1_inputtoresult))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Country", var2_const_), var2_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var10_vmf1_inputtoresult)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq5_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq5_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq5_create_element_with_prefix closure;
                string var28_const_PassportIssuanceCoun;
                string var25_const_DOB;
                string var22_const_ConsigneeLastName;
                string var19_const_ConsigneeFirstName;
                string var16_const_ConsigneeNumber;
                string var13_const_ConsigneeNumberQuali;
                string var11_const_http___tempuri_org_A;
                System.Collections.IEnumerable var30_filter_elements;
                System.Collections.IEnumerable var27_filter_elements;
                System.Collections.IEnumerable var24_filter_elements;
                System.Collections.IEnumerable var21_filter_elements;
                System.Collections.IEnumerable var18_filter_elements;
                System.Collections.IEnumerable var12_filter_elements;
                System.Collections.IEnumerable var3_filter_elements;
                decimal var9_const_35;
                string var7_cast;
                System.Collections.IEnumerable var10_vmf1_inputtoresult;
                double var6_;
                double var5_;
                string var4_substring_after;
                string var8_concat;
                string var2_const_;
                System.Collections.IEnumerable var15_vmf2_inputtoresult;
                string var14_const_;
                string var17_const_;
                string var20_const_;
                string var23_const_;
                string var26_const_;
                string var29_const_;
                public Enumerator(seq5_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 9;
                                var28_const_PassportIssuanceCoun = ("PassportIssuanceCountry");
                                var25_const_DOB = ("DOB");
                                var22_const_ConsigneeLastName = ("ConsigneeLastName");
                                var19_const_ConsigneeFirstName = ("ConsigneeFirstName");
                                var16_const_ConsigneeNumber = ("ConsigneeNumber");
                                var13_const_ConsigneeNumberQuali = ("ConsigneeNumberQualifier");
                                var11_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var30_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var28_const_PassportIssuanceCoun, var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var27_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var25_const_DOB, var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var24_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var22_const_ConsigneeLastName, var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var21_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var19_const_ConsigneeFirstName, var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var18_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var16_const_ConsigneeNumber, var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var12_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var13_const_ConsigneeNumberQuali, var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("ConsigneePartyInfo", var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var9_const_35 = (35m);
                                var7_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements)));
                                var10_vmf1_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf1_inputtoresult.Create(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Country>"), "<Country>")));
                                var6_ = (Altova.CoreTypes.DecimalToDouble(40m));
                                var5_ = (Altova.CoreTypes.DecimalToDouble(0m));
                                var4_substring_after = (Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Name>"), "<Name>"));
                                var8_concat = (Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(var4_substring_after, Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Address>"), "<Address>")));
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Name", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)));
                                pos++;
                                return true;
                            case 6:
                                state = 24;
                                if (!(Altova.Functions.Core.Exists(var12_filter_elements))) { state = 23; goto case 23; }
                                goto case 24;
                            case 9:
                                state = 10;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress1", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(var8_concat, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(var9_const_35))))));
                                pos++;
                                return true;
                            case 10:
                                state = 11;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress2", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var8_concat, Altova.CoreTypes.DecimalToDouble(36m), Altova.CoreTypes.DecimalToDouble(var9_const_35))));
                                pos++;
                                return true;
                            case 11:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("CityStateZip", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</City>"), "<City>"), " "), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Zip>"), "<Zip>"))));
                                pos++;
                                return true;
                            case 12:
                                state = 6;
                                if (!(Altova.Functions.Core.Exists(var10_vmf1_inputtoresult))) { state = 6; goto case 6; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Country", var2_const_), var2_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var10_vmf1_inputtoresult)));
                                pos++;
                                return true;
                            case 23:
                                state = 37;
                                if (!(Altova.Functions.Core.Exists(var18_filter_elements))) { state = 36; goto case 36; }
                                goto case 37;
                            case 24:
                                state = 23;
                                var15_vmf2_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf2_inputtoresult.Create(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var12_filter_elements))));
                                if (!(Altova.Functions.Core.Exists(var15_vmf2_inputtoresult))) { state = 23; goto case 23; }
                                var14_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var13_const_ConsigneeNumberQuali, var14_const_), var14_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var15_vmf2_inputtoresult)));
                                pos++;
                                return true;
                            case 36:
                                state = 44;
                                if (!(Altova.Functions.Core.Exists(var21_filter_elements))) { state = 43; goto case 43; }
                                goto case 44;
                            case 37:
                                state = 36;
                                var17_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var16_const_ConsigneeNumber, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var18_filter_elements))));
                                pos++;
                                return true;
                            case 43:
                                state = 51;
                                if (!(Altova.Functions.Core.Exists(var24_filter_elements))) { state = 50; goto case 50; }
                                goto case 51;
                            case 44:
                                state = 43;
                                var20_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var19_const_ConsigneeFirstName, var20_const_), var20_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var21_filter_elements))));
                                pos++;
                                return true;
                            case 50:
                                state = 58;
                                if (!(Altova.Functions.Core.Exists(var27_filter_elements))) { state = 57; goto case 57; }
                                goto case 58;
                            case 51:
                                state = 50;
                                var23_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var22_const_ConsigneeLastName, var23_const_), var23_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var24_filter_elements))));
                                pos++;
                                return true;
                            case 57:
                                state = 65;
                                if (!(Altova.Functions.Core.Exists(var30_filter_elements))) { state = 0; return false; }
                                goto case 65;
                            case 58:
                                state = 57;
                                var26_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var25_const_DOB, var26_const_), var26_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var27_filter_elements))));
                                pos++;
                                return true;
                            case 65:
                                state = 0;
                                var29_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var28_const_PassportIssuanceCoun, var29_const_), var29_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var30_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq6_cond_seq_ : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq6_cond_seq_(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq6_cond_seq_ closure;
                System.Collections.IEnumerable var3_filter_elements;
                decimal var9_const_35;
                string var7_cast;
                System.Collections.IEnumerable var10_vmf1_inputtoresult;
                double var6_;
                double var5_;
                string var4_substring_after;
                string var8_concat;
                string var2_const_;
                public Enumerator(seq6_cond_seq_ closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 9;
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("ShipToPartyInfo", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 0; return false; }
                                var9_const_35 = (35m);
                                var7_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements)));
                                var10_vmf1_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf1_inputtoresult.Create(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Country>"), "<Country>")));
                                var6_ = (Altova.CoreTypes.DecimalToDouble(40m));
                                var5_ = (Altova.CoreTypes.DecimalToDouble(0m));
                                var4_substring_after = (Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Name>"), "<Name>"));
                                var8_concat = (Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(var4_substring_after, Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Address>"), "<Address>")));
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Name", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)));
                                pos++;
                                return true;
                            case 9:
                                state = 10;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress1", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(var8_concat, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(var9_const_35))))));
                                pos++;
                                return true;
                            case 10:
                                state = 11;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress2", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var8_concat, Altova.CoreTypes.DecimalToDouble(36m), Altova.CoreTypes.DecimalToDouble(var9_const_35))));
                                pos++;
                                return true;
                            case 11:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("CityStateZip", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</City>"), "<City>"), " "), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Zip>"), "<Zip>"))));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var10_vmf1_inputtoresult))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Country", var2_const_), var2_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var10_vmf1_inputtoresult)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq7_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq7_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq7_create_element_with_prefix closure;
                string var25_const_ImporterOfRecordDOB;
                string var22_const_ImporterOfRecordLast;
                string var19_const_ImporterOfRecordFirs;
                string var16_const_ImporterOfRecordNumb;
                string var13_const_ImporterOfRecordNumb;
                string var11_const_http___tempuri_org_A;
                System.Collections.IEnumerable var29_filter_elements;
                System.Collections.IEnumerable var27_filter_elements;
                System.Collections.IEnumerable var24_filter_elements;
                System.Collections.IEnumerable var21_filter_elements;
                System.Collections.IEnumerable var18_filter_elements;
                System.Collections.IEnumerable var12_filter_elements;
                System.Collections.IEnumerable var3_filter_elements;
                decimal var9_const_35;
                string var7_cast;
                System.Collections.IEnumerable var10_vmf1_inputtoresult;
                double var6_;
                double var5_;
                string var4_substring_after;
                string var8_concat;
                string var2_const_;
                System.Collections.IEnumerable var15_vmf3_inputtoresult;
                string var14_const_;
                string var17_const_;
                string var20_const_;
                string var23_const_;
                string var26_const_;
                string var28_const_;
                public Enumerator(seq7_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 9;
                                var25_const_ImporterOfRecordDOB = ("ImporterOfRecordDOB");
                                var22_const_ImporterOfRecordLast = ("ImporterOfRecordLastName");
                                var19_const_ImporterOfRecordFirs = ("ImporterOfRecordFirstName");
                                var16_const_ImporterOfRecordNumb = ("ImporterOfRecordNumber");
                                var13_const_ImporterOfRecordNumb = ("ImporterOfRecordNumberQualifier");
                                var11_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var29_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("ImporterOfPassportIssuanceCountry", var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var27_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var25_const_ImporterOfRecordDOB, var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var24_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var22_const_ImporterOfRecordLast, var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var21_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var19_const_ImporterOfRecordFirs, var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var18_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var16_const_ImporterOfRecordNumb, var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var12_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var13_const_ImporterOfRecordNumb, var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("BuyerPartyInfo", var11_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var9_const_35 = (35m);
                                var7_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements)));
                                var10_vmf1_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf1_inputtoresult.Create(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Country>"), "<Country>")));
                                var6_ = (Altova.CoreTypes.DecimalToDouble(40m));
                                var5_ = (Altova.CoreTypes.DecimalToDouble(0m));
                                var4_substring_after = (Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Name>"), "<Name>"));
                                var8_concat = (Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(var4_substring_after, Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Address>"), "<Address>")));
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Name", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)));
                                pos++;
                                return true;
                            case 6:
                                state = 24;
                                if (!(Altova.Functions.Core.Exists(var12_filter_elements))) { state = 23; goto case 23; }
                                goto case 24;
                            case 9:
                                state = 10;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress1", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(var8_concat, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(var9_const_35))))));
                                pos++;
                                return true;
                            case 10:
                                state = 11;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress2", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var8_concat, Altova.CoreTypes.DecimalToDouble(36m), Altova.CoreTypes.DecimalToDouble(var9_const_35))));
                                pos++;
                                return true;
                            case 11:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("CityStateZip", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</City>"), "<City>"), " "), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Zip>"), "<Zip>"))));
                                pos++;
                                return true;
                            case 12:
                                state = 6;
                                if (!(Altova.Functions.Core.Exists(var10_vmf1_inputtoresult))) { state = 6; goto case 6; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Country", var2_const_), var2_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var10_vmf1_inputtoresult)));
                                pos++;
                                return true;
                            case 23:
                                state = 37;
                                if (!(Altova.Functions.Core.Exists(var18_filter_elements))) { state = 36; goto case 36; }
                                goto case 37;
                            case 24:
                                state = 23;
                                var15_vmf3_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf3_inputtoresult.Create(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var12_filter_elements))));
                                if (!(Altova.Functions.Core.Exists(var15_vmf3_inputtoresult))) { state = 23; goto case 23; }
                                var14_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var13_const_ImporterOfRecordNumb, var14_const_), var14_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var15_vmf3_inputtoresult)));
                                pos++;
                                return true;
                            case 36:
                                state = 44;
                                if (!(Altova.Functions.Core.Exists(var21_filter_elements))) { state = 43; goto case 43; }
                                goto case 44;
                            case 37:
                                state = 36;
                                var17_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var16_const_ImporterOfRecordNumb, var17_const_), var17_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var18_filter_elements))));
                                pos++;
                                return true;
                            case 43:
                                state = 51;
                                if (!(Altova.Functions.Core.Exists(var24_filter_elements))) { state = 50; goto case 50; }
                                goto case 51;
                            case 44:
                                state = 43;
                                var20_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var19_const_ImporterOfRecordFirs, var20_const_), var20_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var21_filter_elements))));
                                pos++;
                                return true;
                            case 50:
                                state = 58;
                                if (!(Altova.Functions.Core.Exists(var27_filter_elements))) { state = 57; goto case 57; }
                                goto case 58;
                            case 51:
                                state = 50;
                                var23_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var22_const_ImporterOfRecordLast, var23_const_), var23_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var24_filter_elements))));
                                pos++;
                                return true;
                            case 57:
                                state = 65;
                                if (!(Altova.Functions.Core.Exists(var29_filter_elements))) { state = 0; return false; }
                                goto case 65;
                            case 58:
                                state = 57;
                                var26_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var25_const_ImporterOfRecordDOB, var26_const_), var26_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var27_filter_elements))));
                                pos++;
                                return true;
                            case 65:
                                state = 0;
                                var28_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PassportIssuanceCountry", var28_const_), var28_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var29_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq8_cond_seq_ : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq8_cond_seq_(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq8_cond_seq_ closure;
                System.Collections.IEnumerable var3_filter_elements;
                decimal var9_const_35;
                string var7_cast;
                System.Collections.IEnumerable var10_vmf1_inputtoresult;
                double var6_;
                double var5_;
                string var4_substring_after;
                string var8_concat;
                string var2_const_;
                public Enumerator(seq8_cond_seq_ closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 9;
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("SellerPartyInfo", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 0; return false; }
                                var9_const_35 = (35m);
                                var7_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements)));
                                var10_vmf1_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf1_inputtoresult.Create(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Country>"), "<Country>")));
                                var6_ = (Altova.CoreTypes.DecimalToDouble(40m));
                                var5_ = (Altova.CoreTypes.DecimalToDouble(0m));
                                var4_substring_after = (Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Name>"), "<Name>"));
                                var8_concat = (Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(var4_substring_after, Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Address>"), "<Address>")));
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Name", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)));
                                pos++;
                                return true;
                            case 9:
                                state = 10;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress1", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(var8_concat, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(var9_const_35))))));
                                pos++;
                                return true;
                            case 10:
                                state = 11;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress2", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var8_concat, Altova.CoreTypes.DecimalToDouble(36m), Altova.CoreTypes.DecimalToDouble(var9_const_35))));
                                pos++;
                                return true;
                            case 11:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("CityStateZip", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</City>"), "<City>"), " "), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Zip>"), "<Zip>"))));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var10_vmf1_inputtoresult))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Country", var2_const_), var2_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var10_vmf1_inputtoresult)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq9_cond_seq_ : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq9_cond_seq_(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq9_cond_seq_ closure;
                System.Collections.IEnumerable var3_filter_elements;
                decimal var9_const_35;
                string var7_cast;
                System.Collections.IEnumerable var10_vmf1_inputtoresult;
                double var6_;
                double var5_;
                string var4_substring_after;
                string var8_concat;
                string var2_const_;
                public Enumerator(seq9_cond_seq_ closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 9;
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("ManufacturerPartyInfo", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 0; return false; }
                                var9_const_35 = (35m);
                                var7_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements)));
                                var10_vmf1_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf1_inputtoresult.Create(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Country>"), "<Country>")));
                                var6_ = (Altova.CoreTypes.DecimalToDouble(40m));
                                var5_ = (Altova.CoreTypes.DecimalToDouble(0m));
                                var4_substring_after = (Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Name>"), "<Name>"));
                                var8_concat = (Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(var4_substring_after, Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Address>"), "<Address>")));
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Name", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)));
                                pos++;
                                return true;
                            case 9:
                                state = 10;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress1", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(var8_concat, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(var9_const_35))))));
                                pos++;
                                return true;
                            case 10:
                                state = 11;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress2", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var8_concat, Altova.CoreTypes.DecimalToDouble(36m), Altova.CoreTypes.DecimalToDouble(var9_const_35))));
                                pos++;
                                return true;
                            case 11:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("CityStateZip", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</City>"), "<City>"), " "), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Zip>"), "<Zip>"))));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var10_vmf1_inputtoresult))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Country", var2_const_), var2_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var10_vmf1_inputtoresult)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq10_cond_seq_ : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq10_cond_seq_(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq10_cond_seq_ closure;
                System.Collections.IEnumerable var3_filter_elements;
                decimal var9_const_35;
                string var7_cast;
                System.Collections.IEnumerable var10_vmf1_inputtoresult;
                double var6_;
                double var5_;
                string var4_substring_after;
                string var8_concat;
                string var2_const_;
                public Enumerator(seq10_cond_seq_ closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 9;
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("ConsolidatorPartyInfo", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 0; return false; }
                                var9_const_35 = (35m);
                                var7_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements)));
                                var10_vmf1_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf1_inputtoresult.Create(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Country>"), "<Country>")));
                                var6_ = (Altova.CoreTypes.DecimalToDouble(40m));
                                var5_ = (Altova.CoreTypes.DecimalToDouble(0m));
                                var4_substring_after = (Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Name>"), "<Name>"));
                                var8_concat = (Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(var4_substring_after, Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Address>"), "<Address>")));
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Name", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)));
                                pos++;
                                return true;
                            case 9:
                                state = 10;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress1", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(var8_concat, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(var9_const_35))))));
                                pos++;
                                return true;
                            case 10:
                                state = 11;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress2", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var8_concat, Altova.CoreTypes.DecimalToDouble(36m), Altova.CoreTypes.DecimalToDouble(var9_const_35))));
                                pos++;
                                return true;
                            case 11:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("CityStateZip", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</City>"), "<City>"), " "), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Zip>"), "<Zip>"))));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var10_vmf1_inputtoresult))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Country", var2_const_), var2_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var10_vmf1_inputtoresult)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq11_cond_seq_ : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq11_cond_seq_(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq11_cond_seq_ closure;
                System.Collections.IEnumerable var3_filter_elements;
                decimal var9_const_35;
                string var7_cast;
                System.Collections.IEnumerable var10_vmf1_inputtoresult;
                double var6_;
                double var5_;
                string var4_substring_after;
                string var8_concat;
                string var2_const_;
                public Enumerator(seq11_cond_seq_ closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 9;
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("ContainerStuffingLocation", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 0; return false; }
                                var9_const_35 = (35m);
                                var7_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements)));
                                var10_vmf1_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf1_inputtoresult.Create(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Country>"), "<Country>")));
                                var6_ = (Altova.CoreTypes.DecimalToDouble(40m));
                                var5_ = (Altova.CoreTypes.DecimalToDouble(0m));
                                var4_substring_after = (Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Name>"), "<Name>"));
                                var8_concat = (Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(var4_substring_after, Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Address>"), "<Address>")));
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Name", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)));
                                pos++;
                                return true;
                            case 9:
                                state = 10;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress1", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(var8_concat, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(var9_const_35))))));
                                pos++;
                                return true;
                            case 10:
                                state = 11;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress2", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var8_concat, Altova.CoreTypes.DecimalToDouble(36m), Altova.CoreTypes.DecimalToDouble(var9_const_35))));
                                pos++;
                                return true;
                            case 11:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("CityStateZip", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</City>"), "<City>"), " "), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Zip>"), "<Zip>"))));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var10_vmf1_inputtoresult))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Country", var2_const_), var2_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var10_vmf1_inputtoresult)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq12_cond_seq_ : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq12_cond_seq_(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq12_cond_seq_ closure;
                System.Collections.IEnumerable var3_filter_elements;
                decimal var9_const_35;
                string var7_cast;
                System.Collections.IEnumerable var10_vmf1_inputtoresult;
                double var6_;
                double var5_;
                string var4_substring_after;
                string var8_concat;
                string var2_const_;
                public Enumerator(seq12_cond_seq_ closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 9;
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("BookingPartyInfo", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 0; return false; }
                                var9_const_35 = (35m);
                                var7_cast = (Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements)));
                                var10_vmf1_inputtoresult = new Altova.Functions.Core.SequenceCache(vmf.vmf1_inputtoresult.Create(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Country>"), "<Country>")));
                                var6_ = (Altova.CoreTypes.DecimalToDouble(40m));
                                var5_ = (Altova.CoreTypes.DecimalToDouble(0m));
                                var4_substring_after = (Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Name>"), "<Name>"));
                                var8_concat = (Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(var4_substring_after, Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Address>"), "<Address>")));
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Name", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var4_substring_after, var5_, var6_)));
                                pos++;
                                return true;
                            case 9:
                                state = 10;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress1", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(var8_concat, Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(var9_const_35))))));
                                pos++;
                                return true;
                            case 10:
                                state = 11;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("StreetAddress2", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Substring(var8_concat, Altova.CoreTypes.DecimalToDouble(36m), Altova.CoreTypes.DecimalToDouble(var9_const_35))));
                                pos++;
                                return true;
                            case 11:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("CityStateZip", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.Functions.Core.Concat(Altova.Functions.Core.Concat(Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</City>"), "<City>"), " "), Altova.Functions.Core.SubstringAfter(Altova.Functions.Core.SubstringBefore(var7_cast, "</Zip>"), "<Zip>"))));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var10_vmf1_inputtoresult))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Country", var2_const_), var2_const_, Altova.Functions.Core.Box((string)Altova.Functions.Core.First(var10_vmf1_inputtoresult)));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq13_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq13_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq13_create_element_with_prefix closure;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq13_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PlaceOfReceiptPortCode", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 0;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq14_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq14_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq14_create_element_with_prefix closure;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var6_filter_elements;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq14_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var6_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PortOfLoadPortDate", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PortOfLoadPortCode", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var6_filter_elements))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Date", var4_const_), var4_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var6_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq15_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq15_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq15_create_element_with_prefix closure;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq15_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("LastForeignPortPortCode", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 0;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq16_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq16_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq16_create_element_with_prefix closure;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var6_filter_elements;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq16_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var6_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("FirstUSAPortPortDate", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("FirstUSAPortPortCode", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var6_filter_elements))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Date", var4_const_), var4_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var6_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq17_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq17_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq17_create_element_with_prefix closure;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var6_filter_elements;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq17_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var6_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PortOfDischargeDate", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PortOfDischargePortCode", var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 12;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                            case 12:
                                state = 0;
                                if (!(Altova.Functions.Core.Exists(var6_filter_elements))) { state = 0; return false; }
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Date", var4_const_), var4_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var6_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq18_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq18_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq18_create_element_with_prefix closure;
                string var4_const_;
                System.Collections.IEnumerable var3_filter_elements;
                string var2_const_;
                public Enumerator(seq18_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var4_const_ = ("");
                                var3_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName("PlaceOfDeliveryPortCode", "http://tempuri.org/AMSDataSource.xsd"), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var3_filter_elements))) { state = 6; goto case 6; }
                                var2_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("PortCode", var2_const_), var2_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var3_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 0;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("Qualifier", var4_const_), var4_const_, Altova.Functions.Core.Box("UN"));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq19_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq19_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq19_create_element_with_prefix closure;
                string var9_const_;
                string var6_const_Seal;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var8_filter_elements;
                string var2_const_ContainerNumber;
                System.Collections.IEnumerable var4_filter_elements;
                string var3_const_;
                string var7_const_;
                public Enumerator(seq19_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var9_const_ = ("");
                                var6_const_Seal = ("Seal");
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var8_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var6_const_Seal, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var2_const_ContainerNumber = ("ContainerNumber");
                                var4_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var2_const_ContainerNumber, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var4_filter_elements))) { state = 6; goto case 6; }
                                var3_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var2_const_ContainerNumber, var3_const_), var3_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var4_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 14;
                                if (!(Altova.Functions.Core.Exists(var8_filter_elements))) { state = 13; goto case 13; }
                                goto case 14;
                            case 13:
                                state = 0;
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName("ContainerContent", var9_const_), var9_const_, (new seq20_create_element_with_prefix(closure.var1_cur_filter_elements)));
                                pos++;
                                return true;
                            case 14:
                                state = 13;
                                var7_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var6_const_Seal, var7_const_), var7_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var8_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
        class seq20_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq20_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq20_create_element_with_prefix closure;
                string var16_const_ContainerDetails;
                string var12_const_FreeFormDescription;
                string var9_const_UnitOfMeasure;
                string var6_const_Quantity;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var14_filter_elements;
                System.Collections.IEnumerable var11_filter_elements;
                System.Collections.IEnumerable var8_filter_elements;
                string var2_const_Kilos;
                System.Collections.IEnumerable var4_filter_elements;
                string var3_const_;
                string var7_const_;
                string var10_const_;
                string var13_const_;
                IEnumerator var15_map_filter_elements;
                string var17_const_;
                public Enumerator(seq20_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var16_const_ContainerDetails = ("ContainerDetails");
                                var12_const_FreeFormDescription = ("FreeFormDescription");
                                var9_const_UnitOfMeasure = ("UnitOfMeasure");
                                var6_const_Quantity = ("Quantity");
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var14_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var12_const_FreeFormDescription, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var11_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var9_const_UnitOfMeasure, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var8_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var6_const_Quantity, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var2_const_Kilos = ("Kilos");
                                var4_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var2_const_Kilos, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var4_filter_elements))) { state = 6; goto case 6; }
                                var3_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var2_const_Kilos, var3_const_), var3_const_, Altova.Functions.Core.Box(Altova.CoreTypes.DecimalToString(Altova.Functions.Core.Round(Altova.CoreTypes.ParseDecimal(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var4_filter_elements)))))));
                                pos++;
                                return true;
                            case 6:
                                state = 14;
                                if (!(Altova.Functions.Core.Exists(var8_filter_elements))) { state = 13; goto case 13; }
                                goto case 14;
                            case 13:
                                state = 21;
                                if (!(Altova.Functions.Core.Exists(var11_filter_elements))) { state = 20; goto case 20; }
                                goto case 21;
                            case 14:
                                state = 13;
                                var7_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var6_const_Quantity, var7_const_), var7_const_, Altova.Functions.Core.Box(Altova.CoreTypes.DecimalToString(Altova.CoreTypes.LongToDecimal(Altova.CoreTypes.IntToLong(Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(Altova.CoreTypes.ParseDecimal(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var8_filter_elements)))))))))));
                                pos++;
                                return true;
                            case 20:
                                state = 28;
                                if (!(Altova.Functions.Core.Exists(var14_filter_elements))) { state = 27; goto case 27; }
                                goto case 28;
                            case 21:
                                state = 20;
                                var10_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var9_const_UnitOfMeasure, var10_const_), var10_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var11_filter_elements))));
                                pos++;
                                return true;
                            case 27:
                                state = 33;
                                var15_map_filter_elements = (Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var16_const_ContainerDetails, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements)).GetEnumerator();
                                goto case 33;
                            case 28:
                                state = 27;
                                var13_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var12_const_FreeFormDescription, var13_const_), var13_const_, Altova.Functions.Core.Box(Altova.Functions.Lang.Left(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var14_filter_elements)), Altova.CoreTypes.LongToInt(Altova.CoreTypes.DecimalToLong(Altova.CoreTypes.DecimalToInteger(180m))))));
                                pos++;
                                return true;
                            case 33:
                                state = 33;
                                if (!var15_map_filter_elements.MoveNext()) { state = 34; goto case 34; }
                                var17_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var16_const_ContainerDetails, var17_const_), var17_const_, (new seq21_create_element_with_prefix((Altova.Mapforce.IMFNode)(var15_map_filter_elements.Current))));
                                pos++;
                                return true;
                            case 34:
                                state = 0;
                                Altova.Mapforce.MFEnumerator.Dispose(var15_map_filter_elements); var15_map_filter_elements = null;
                                return false;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                    Altova.Mapforce.MFEnumerator.Dispose(var15_map_filter_elements); var15_map_filter_elements = null;
                }
            }

        }
        class seq21_create_element_with_prefix : IEnumerable
        {
            Altova.Mapforce.IMFNode var1_cur_filter_elements;

            public seq21_create_element_with_prefix(
                Altova.Mapforce.IMFNode var1_cur_filter_elements
                )
            {
                this.var1_cur_filter_elements = var1_cur_filter_elements;
            }

            public IEnumerator GetEnumerator() { return new Enumerator(this); }

            class Enumerator : Altova.Mapforce.IMFEnumerator
            {
                int state = 1;
                object current = null;
                int pos = 0;
                seq21_create_element_with_prefix closure;
                string var6_const_CountryOfOrigin;
                string var5_const_http___tempuri_org_A;
                System.Collections.IEnumerable var8_filter_elements;
                string var2_const_HarmonizedTariffCode;
                System.Collections.IEnumerable var4_filter_elements;
                string var3_const_;
                string var7_const_;
                public Enumerator(seq21_create_element_with_prefix closure)
                {
                    this.closure = closure;
                }

                public void Reset() { state = 0; pos = 0; }
                public int Position { get { return pos; } }
                public object Current { get { return current; } }

                public bool MoveNext()
                {
                    while (state != 0)
                    {
                        switch (state)
                        {
                            case 1:
                                state = 6;
                                var6_const_CountryOfOrigin = ("CountryOfOrigin");
                                var5_const_http___tempuri_org_A = ("http://tempuri.org/AMSDataSource.xsd");
                                var8_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var6_const_CountryOfOrigin, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                var2_const_HarmonizedTariffCode = ("HarmonizedTariffCode");
                                var4_filter_elements = new Altova.Functions.Core.SequenceCache(Altova.Functions.Core.FilterElements(Altova.Functions.Core.CreateQName(var2_const_HarmonizedTariffCode, var5_const_http___tempuri_org_A), closure.var1_cur_filter_elements));
                                if (!(Altova.Functions.Core.Exists(var4_filter_elements))) { state = 6; goto case 6; }
                                var3_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var2_const_HarmonizedTariffCode, var3_const_), var3_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var4_filter_elements))));
                                pos++;
                                return true;
                            case 6:
                                state = 14;
                                if (!(Altova.Functions.Core.Exists(var8_filter_elements))) { state = 0; return false; }
                                goto case 14;
                            case 14:
                                state = 0;
                                var7_const_ = ("");
                                current = Altova.Functions.Core.CreateElementWithPrefix(Altova.Functions.Core.CreateQName(var6_const_CountryOfOrigin, var7_const_), var7_const_, Altova.Functions.Core.Box(Altova.CoreTypes.NodeToString((Altova.Mapforce.IMFNode)Altova.Functions.Core.First(var8_filter_elements))));
                                pos++;
                                return true;
                        }
                    }
                    return false;
                }

                public void Dispose()
                {
                }
            }

        }
    }
}
